# HTTP与HTTPS

http（HyperText Transfer Protocol,超文本传输协议），是一种应用层的网络协议，基于TCP/IP协议，主要应用于B/S的请求与应答。可以传输任意数据类型，只需要根据Content-Type指定即可。

https（Hyper Text Transfer Protocol over TLS/SSL），HTTP的安全版，在HTTP下面（传输层）加入了安全层协议SSL（用于加密），用于建立安全通道，确保传输数据的安全性，另一个作用是确认网站的真实性。

# 区别

HTTP传输是明文，不适合传输敏感信息，不安全；而HTTPS进行数据加密，安全性更高。

HTTP默认端口是80；HTTPS默认端口是443。

HTTP更加高效，使网络传输减少；HTTPS握手阶段费时，会先建立SSL连接，延长页面加载时间。



# HTTP1.0

1. HTTP/1.0一次只允许在一个TCP连接上发起一个请求，HTTP/1.1使用的流水线技术也只能部分处理请求并发，仍然会存在队列头阻塞问题：我们经常会使用到雪碧图、使用多个域名等方式来进行优化，都是因为浏览器限制了同一个域名下的请求数量，当页面需要请求很多资源的时候，队头阻塞（Head of line blocking）会导致在达到最大请求时，资源需要等待其他资源请求完成后才能继续发送

2. 单向请求，只能由客户端发起。

3. 请求报文与响应报文首部信息冗余量大。

4. 数据未压缩，导致数据的传输量大。

# HTTP2.0

#### 二进制传输：

在HTTP2.0中引入了新的编码机制，所有传输的数据都会被分割，并采用二进制格式编码。为了保证HTTP不受影响，那就需要在应用层（HTTP2.0）和传输层（TCP or UDP）之间增加一个二进制分帧层。在二进制分帧层上，HTTP2.0会将所有传输的信息分为更小的消息和帧，并采用二进制格式编码。

#### 允许多路复用（解决了队头阻塞问题）：

在http1.1中，浏览器在同一时间，针对同一域名下的请求有一定数量限制（连接数量），超过限制会被阻塞。HTTP2.0中，有两个概念非常重要：帧（frame）和流（stream）。帧是最小的数据单位，每个帧会标识出该帧属于哪个流，流是多个帧组成的数据流。所谓多路复用，即在一个TCP连接中存在多个流，即可以同时发送多个请求，对端可以通过帧中的表示知道该帧属于哪个请求。在客户端，这些帧乱序发送，到对端后再根据每个帧首部的流标识符重新组装。通过该技术，可以避免HTTP旧版本的队头阻塞问题，极大提高传输性能。

#### Header压缩：

在HTTP1.0中，我们使用文本的形式传输header，在header中携带cookie的话，每次都需要重复传输几百到几千的字节；在HTTP2.0中，我们使用了HPACK（HTTP2头部压缩算法）压缩格式对传输的header进行编码，减少了header的大小。并在两端维护了索引表，用于记录出现过的header，后面在传输过程中就可以传输已经记录过的header的键名，对端收到数据后就可以通过键名找到对应的值。

#### Server Push：

在HTTP2.0中，服务端可以在客户端某个请求后，主动推送其他资源。

