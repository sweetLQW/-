# 浏览器渲染机制

1. 输入url，通过DNS查询系统获取ip地址

2. 进行HTTP连接，返回对应的资源

3. 浏览器的HTML解析器将HTML解析，构建一颗DOM树

4. 构建DOM树的时候，遇到JS会将控制权交给JS解析器

5. JS解析器解析完毕后，HTML解析器继续解析，直到DOM构建完成

   **如果节点需要依赖其他资源，例如图片，CSS，视频等，调用资源加载器加载他们，此过程为异步，不会阻碍当前DOM树的构建（CSS加载不会阻碍DOM树的构建，但会阻塞渲染）。对于js资源的加载，则会阻塞DOM树的构建和渲染，除非设置了script标签的异步属性。加载资源是由单独的下载线程进行异步加载，浏览器会并行加载，不过具体并行最大加载数量是有一定限制的。**

6. DOM构建完成后，会将DOM树中的一些不可见元素（script，meta，head等，visibility:hidden;opacity:0等）去掉，然后与CSSOM树生成render树

7.  接着浏览器根据这棵render树，计算出各个节点(元素)在屏幕的位置。这个过程叫做layout，输出的是一棵layout树。

8. 浏览器根据这棵layout树，将页面渲染到屏幕上